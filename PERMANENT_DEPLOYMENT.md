# Руководство по постоянному развертыванию (Permanent Deployment)

Для того чтобы ваш сайт работал постоянно, рекомендуется использовать Docker или облачные платформы.

## Вариант 1: Развертывание через Docker (Рекомендуется для VPS)

Этот способ позволяет запустить проект одной командой на любом сервере (DigitalOcean, AWS, Timeweb и т.д.).

1. Установите Docker и Docker Compose на ваш сервер.
2. Скопируйте файлы проекта на сервер.
3. Создайте файл `.env` в корневой директории:
   ```env
   OPENAI_API_KEY=ваш_ключ_здесь
   ```
4. Запустите проект:
   ```bash
   docker-compose up -d --build
   ```
Сайт будет доступен по адресу `http://ваш-ip:8501`, а API по адресу `http://ваш-ip:8000`.

## Вариант 2: Облачные платформы (PaaS)

### Фронтенд (Streamlit Cloud) - БЕСПЛАТНО
1. Зайдите на [share.streamlit.io](https://share.streamlit.io/).
2. Подключите ваш GitHub репозиторий `AI_finanalitik`.
3. Укажите путь к основному файлу: `frontend/app.py`.
4. В настройках (Secrets) добавьте `API_BASE_URL`, указывающий на ваш развернутый бэкенд.

### Бэкенд (Render / Railway)
1. Создайте новый Web Service и подключите репозиторий.
2. Укажите Root Directory: `backend`.
3. Команда сборки: `pip install -r requirements.txt`.
4. Команда запуска: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`.
5. Добавьте переменные окружения:
   - `DATABASE_URL`: используйте внешнюю БД PostgreSQL (рекомендуется) или SQLite (данные могут сбрасываться при перезагрузке на Render).
   - `OPENAI_API_KEY`.

## Важные замечания для Production
- **База данных**: Для постоянного хранения данных в облаке используйте PostgreSQL. В `DATABASE_URL` укажите строку подключения к вашей БД.
- **Безопасность**: В `backend/app/main.py` настройте CORS, чтобы разрешить доступ только с вашего домена фронтенда.
- **Обновления**: При использовании Docker Compose, для обновления просто выполните `git pull` и `docker-compose up -d --build`.
